import { WEATHER_API_KEY } from '$env/static/private';
import { json } from '@sveltejs/kit';

import fs from 'fs';

import qs from 'query-string';

export const prerender = false;

const TTL = 3600000; // time in milliseconds to ask for a new forecast
const FILENAME = 'forecast.json';

const API_BASE = "http://api.weatherapi.com/v1/forecast.json";
const PARAMS = {
    key: WEATHER_API_KEY,
    q: "Toronto",
    days: "1",
    aqi: "no",
    alerts: "no",
};

export const GET = async () => {
    // Check "staleness" of previous forecast 
    let isStale = false;
    const currentDateEpoch = Date.now();
    try {
        const prev = JSON.parse(fs.readFileSync(FILENAME).toString());
        const prevDateEpoch = prev.location.localtime_epoch * 1000;
        isStale = currentDateEpoch - prevDateEpoch > TTL;
        return json(prev);

    } catch(error) {
        if((error as NodeJS.ErrnoException).code == "ENOENT") {
            isStale = true;
        }
        else {
            throw error;
        }
    }


    if(isStale){
        const url = `${API_BASE}?${qs.stringify(PARAMS)}`;
        // const response = await fetch(url);
        // const data = await response.json()

        const data = SAMPLE_DATA;

        // write forecast
        fs.writeFile(FILENAME, data, (err) => {
            if(err) {
                console.error(err);
            } else {
                console.log(`Forecast saved on ${currentDateEpoch.toLocaleString()}`);
            }

        });
        return json(data);
    }

}



const SAMPLE_DATA = `{"location":{"name":"Toronto","region":"Ontario","country":"Canada","lat":43.67,"lon":-79.42,"tz_id":"America/Toronto","localtime_epoch":1720121314,"localtime":"2024-07-04 15:28"},"current":{"last_updated_epoch":1720120500,"last_updated":"2024-07-04 15:15","temp_c":25.0,"temp_f":77.0,"is_day":1,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"wind_mph":6.9,"wind_kph":11.2,"wind_degree":180,"wind_dir":"S","pressure_mb":1011.0,"pressure_in":29.86,"precip_mm":0.0,"precip_in":0.0,"humidity":69,"cloud":0,"feelslike_c":25.8,"feelslike_f":78.4,"windchill_c":28.0,"windchill_f":82.5,"heatindex_c":28.7,"heatindex_f":83.7,"dewpoint_c":16.5,"dewpoint_f":61.7,"vis_km":14.0,"vis_miles":8.0,"uv":7.0,"gust_mph":11.4,"gust_kph":18.4},"forecast":{"forecastday":[{"date":"2024-07-04","date_epoch":1720051200,"day":{"maxtemp_c":28.4,"maxtemp_f":83.1,"mintemp_c":18.8,"mintemp_f":65.8,"avgtemp_c":23.6,"avgtemp_f":74.5,"maxwind_mph":8.9,"maxwind_kph":14.4,"totalprecip_mm":0.06,"totalprecip_in":0.0,"totalsnow_cm":0.0,"avgvis_km":9.0,"avgvis_miles":5.0,"avghumidity":71,"daily_will_it_rain":0,"daily_chance_of_rain":0,"daily_will_it_snow":0,"daily_chance_of_snow":0,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"uv":9.0},"astro":{"sunrise":"05:42 AM","sunset":"09:02 PM","moonrise":"03:53 AM","moonset":"08:36 PM","moon_phase":"Waning Crescent","moon_illumination":5,"is_moon_up":0,"is_sun_up":1},"hour":[{"time_epoch":1720065600,"time":"2024-07-04 00:00","temp_c":21.2,"temp_f":70.2,"is_day":0,"condition":{"text":"Mist","icon":"//cdn.weatherapi.com/weather/64x64/night/143.png","code":1030},"wind_mph":5.1,"wind_kph":8.3,"wind_degree":255,"wind_dir":"WSW","pressure_mb":1011.0,"pressure_in":29.87,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":95,"cloud":14,"feelslike_c":21.2,"feelslike_f":70.2,"windchill_c":21.2,"windchill_f":70.2,"heatindex_c":22.6,"heatindex_f":72.7,"dewpoint_c":20.5,"dewpoint_f":68.9,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":2.0,"vis_miles":1.0,"gust_mph":10.8,"gust_kph":17.4,"uv":1.0},{"time_epoch":1720069200,"time":"2024-07-04 01:00","temp_c":20.8,"temp_f":69.4,"is_day":0,"condition":{"text":"Mist","icon":"//cdn.weatherapi.com/weather/64x64/night/143.png","code":1030},"wind_mph":5.1,"wind_kph":8.3,"wind_degree":269,"wind_dir":"W","pressure_mb":1012.0,"pressure_in":29.88,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":96,"cloud":7,"feelslike_c":20.8,"feelslike_f":69.4,"windchill_c":20.8,"windchill_f":69.4,"heatindex_c":21.5,"heatindex_f":70.6,"dewpoint_c":20.0,"dewpoint_f":68.1,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":2.0,"vis_miles":1.0,"gust_mph":10.8,"gust_kph":17.4,"uv":1.0},{"time_epoch":1720072800,"time":"2024-07-04 02:00","temp_c":20.4,"temp_f":68.6,"is_day":0,"condition":{"text":"Mist","icon":"//cdn.weatherapi.com/weather/64x64/night/143.png","code":1030},"wind_mph":5.4,"wind_kph":8.6,"wind_degree":269,"wind_dir":"W","pressure_mb":1012.0,"pressure_in":29.89,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":94,"cloud":6,"feelslike_c":20.4,"feelslike_f":68.6,"windchill_c":20.4,"windchill_f":68.6,"heatindex_c":20.7,"heatindex_f":69.3,"dewpoint_c":19.3,"dewpoint_f":66.8,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":2.0,"vis_miles":1.0,"gust_mph":11.3,"gust_kph":18.1,"uv":1.0},{"time_epoch":1720076400,"time":"2024-07-04 03:00","temp_c":19.9,"temp_f":67.8,"is_day":0,"condition":{"text":"Clear ","icon":"//cdn.weatherapi.com/weather/64x64/night/113.png","code":1000},"wind_mph":5.4,"wind_kph":8.6,"wind_degree":255,"wind_dir":"WSW","pressure_mb":1012.0,"pressure_in":29.89,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":92,"cloud":3,"feelslike_c":19.9,"feelslike_f":67.8,"windchill_c":19.9,"windchill_f":67.8,"heatindex_c":20.1,"heatindex_f":68.1,"dewpoint_c":18.6,"dewpoint_f":65.6,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":11.3,"gust_kph":18.1,"uv":1.0},{"time_epoch":1720080000,"time":"2024-07-04 04:00","temp_c":19.5,"temp_f":67.1,"is_day":0,"condition":{"text":"Clear ","icon":"//cdn.weatherapi.com/weather/64x64/night/113.png","code":1000},"wind_mph":5.6,"wind_kph":9.0,"wind_degree":263,"wind_dir":"W","pressure_mb":1012.0,"pressure_in":29.89,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":91,"cloud":3,"feelslike_c":19.5,"feelslike_f":67.1,"windchill_c":19.5,"windchill_f":67.1,"heatindex_c":19.6,"heatindex_f":67.2,"dewpoint_c":18.0,"dewpoint_f":64.4,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":11.7,"gust_kph":18.9,"uv":1.0},{"time_epoch":1720083600,"time":"2024-07-04 05:00","temp_c":19.1,"temp_f":66.4,"is_day":0,"condition":{"text":"Clear ","icon":"//cdn.weatherapi.com/weather/64x64/night/113.png","code":1000},"wind_mph":5.8,"wind_kph":9.4,"wind_degree":276,"wind_dir":"W","pressure_mb":1012.0,"pressure_in":29.89,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":91,"cloud":6,"feelslike_c":19.1,"feelslike_f":66.4,"windchill_c":19.1,"windchill_f":66.4,"heatindex_c":19.2,"heatindex_f":66.5,"dewpoint_c":17.6,"dewpoint_f":63.7,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":12.2,"gust_kph":19.7,"uv":1.0},{"time_epoch":1720087200,"time":"2024-07-04 06:00","temp_c":19.3,"temp_f":66.7,"is_day":1,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"wind_mph":5.6,"wind_kph":9.0,"wind_degree":289,"wind_dir":"WNW","pressure_mb":1012.0,"pressure_in":29.9,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":89,"cloud":5,"feelslike_c":19.3,"feelslike_f":66.7,"windchill_c":19.3,"windchill_f":66.7,"heatindex_c":19.3,"heatindex_f":66.8,"dewpoint_c":17.0,"dewpoint_f":62.6,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":11.7,"gust_kph":18.9,"uv":5.0},{"time_epoch":1720090800,"time":"2024-07-04 07:00","temp_c":20.1,"temp_f":68.3,"is_day":1,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"wind_mph":4.5,"wind_kph":7.2,"wind_degree":277,"wind_dir":"W","pressure_mb":1013.0,"pressure_in":29.9,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":85,"cloud":11,"feelslike_c":20.1,"feelslike_f":68.3,"windchill_c":20.1,"windchill_f":68.3,"heatindex_c":20.2,"heatindex_f":68.3,"dewpoint_c":16.9,"dewpoint_f":62.5,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":9.1,"gust_kph":14.6,"uv":5.0},{"time_epoch":1720094400,"time":"2024-07-04 08:00","temp_c":21.5,"temp_f":70.6,"is_day":1,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"wind_mph":4.3,"wind_kph":6.8,"wind_degree":272,"wind_dir":"W","pressure_mb":1013.0,"pressure_in":29.9,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":77,"cloud":22,"feelslike_c":21.5,"feelslike_f":70.6,"windchill_c":21.5,"windchill_f":70.6,"heatindex_c":22.5,"heatindex_f":72.5,"dewpoint_c":16.9,"dewpoint_f":62.4,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":7.2,"gust_kph":11.6,"uv":6.0},{"time_epoch":1720098000,"time":"2024-07-04 09:00","temp_c":23.0,"temp_f":73.3,"is_day":1,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"wind_mph":4.5,"wind_kph":7.2,"wind_degree":268,"wind_dir":"W","pressure_mb":1013.0,"pressure_in":29.91,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":69,"cloud":3,"feelslike_c":24.2,"feelslike_f":75.5,"windchill_c":23.0,"windchill_f":73.3,"heatindex_c":24.2,"heatindex_f":75.5,"dewpoint_c":16.8,"dewpoint_f":62.3,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":6.7,"gust_kph":10.8,"uv":6.0},{"time_epoch":1720101600,"time":"2024-07-04 10:00","temp_c":24.3,"temp_f":75.8,"is_day":1,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"wind_mph":4.0,"wind_kph":6.5,"wind_degree":255,"wind_dir":"WSW","pressure_mb":1013.0,"pressure_in":29.9,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":62,"cloud":3,"feelslike_c":25.5,"feelslike_f":77.8,"windchill_c":24.3,"windchill_f":75.8,"heatindex_c":25.5,"heatindex_f":77.8,"dewpoint_c":16.8,"dewpoint_f":62.2,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":5.9,"gust_kph":9.5,"uv":6.0},{"time_epoch":1720105200,"time":"2024-07-04 11:00","temp_c":25.5,"temp_f":77.9,"is_day":1,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"wind_mph":4.9,"wind_kph":7.9,"wind_degree":237,"wind_dir":"WSW","pressure_mb":1012.0,"pressure_in":29.89,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":57,"cloud":4,"feelslike_c":26.4,"feelslike_f":79.6,"windchill_c":25.5,"windchill_f":77.8,"heatindex_c":26.4,"heatindex_f":79.6,"dewpoint_c":16.5,"dewpoint_f":61.8,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":7.2,"gust_kph":11.6,"uv":7.0},{"time_epoch":1720108800,"time":"2024-07-04 12:00","temp_c":26.4,"temp_f":79.5,"is_day":1,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"wind_mph":5.6,"wind_kph":9.0,"wind_degree":228,"wind_dir":"SW","pressure_mb":1012.0,"pressure_in":29.88,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":54,"cloud":7,"feelslike_c":27.3,"feelslike_f":81.1,"windchill_c":26.4,"windchill_f":79.5,"heatindex_c":27.3,"heatindex_f":81.1,"dewpoint_c":16.5,"dewpoint_f":61.6,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":8.2,"gust_kph":13.2,"uv":7.0},{"time_epoch":1720112400,"time":"2024-07-04 13:00","temp_c":27.1,"temp_f":80.7,"is_day":1,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"wind_mph":6.7,"wind_kph":10.8,"wind_degree":234,"wind_dir":"SW","pressure_mb":1012.0,"pressure_in":29.88,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":52,"cloud":8,"feelslike_c":27.9,"feelslike_f":82.2,"windchill_c":27.1,"windchill_f":80.7,"heatindex_c":27.9,"heatindex_f":82.2,"dewpoint_c":16.5,"dewpoint_f":61.7,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":9.8,"gust_kph":15.7,"uv":7.0},{"time_epoch":1720116000,"time":"2024-07-04 14:00","temp_c":27.7,"temp_f":81.8,"is_day":1,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"wind_mph":6.7,"wind_kph":10.8,"wind_degree":242,"wind_dir":"WSW","pressure_mb":1011.0,"pressure_in":29.86,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":51,"cloud":24,"feelslike_c":28.4,"feelslike_f":83.2,"windchill_c":27.7,"windchill_f":81.8,"heatindex_c":28.4,"heatindex_f":83.2,"dewpoint_c":16.6,"dewpoint_f":61.9,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":10.0,"gust_kph":16.0,"uv":7.0},{"time_epoch":1720119600,"time":"2024-07-04 15:00","temp_c":25.0,"temp_f":77.0,"is_day":1,"condition":{"text":"Sunny","icon":"//cdn.weatherapi.com/weather/64x64/day/113.png","code":1000},"wind_mph":6.9,"wind_kph":11.2,"wind_degree":180,"wind_dir":"S","pressure_mb":1011.0,"pressure_in":29.86,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":69,"cloud":0,"feelslike_c":28.7,"feelslike_f":83.7,"windchill_c":28.0,"windchill_f":82.5,"heatindex_c":28.7,"heatindex_f":83.7,"dewpoint_c":16.5,"dewpoint_f":61.7,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":14.0,"vis_miles":8.0,"gust_mph":11.4,"gust_kph":18.4,"uv":7.0},{"time_epoch":1720123200,"time":"2024-07-04 16:00","temp_c":28.0,"temp_f":82.3,"is_day":1,"condition":{"text":"Partly Cloudy ","icon":"//cdn.weatherapi.com/weather/64x64/day/116.png","code":1003},"wind_mph":7.8,"wind_kph":12.6,"wind_degree":250,"wind_dir":"WSW","pressure_mb":1011.0,"pressure_in":29.84,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":48,"cloud":32,"feelslike_c":28.7,"feelslike_f":83.6,"windchill_c":28.0,"windchill_f":82.3,"heatindex_c":28.7,"heatindex_f":83.6,"dewpoint_c":16.4,"dewpoint_f":61.5,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":12.1,"gust_kph":19.5,"uv":7.0},{"time_epoch":1720126800,"time":"2024-07-04 17:00","temp_c":27.4,"temp_f":81.4,"is_day":1,"condition":{"text":"Partly Cloudy ","icon":"//cdn.weatherapi.com/weather/64x64/day/116.png","code":1003},"wind_mph":8.9,"wind_kph":14.4,"wind_degree":267,"wind_dir":"W","pressure_mb":1010.0,"pressure_in":29.83,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":50,"cloud":30,"feelslike_c":28.3,"feelslike_f":82.9,"windchill_c":27.4,"windchill_f":81.4,"heatindex_c":28.3,"heatindex_f":82.9,"dewpoint_c":16.6,"dewpoint_f":62.0,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":14.8,"gust_kph":23.8,"uv":7.0},{"time_epoch":1720130400,"time":"2024-07-04 18:00","temp_c":26.8,"temp_f":80.2,"is_day":1,"condition":{"text":"Patchy rain nearby","icon":"//cdn.weatherapi.com/weather/64x64/day/176.png","code":1063},"wind_mph":8.7,"wind_kph":14.0,"wind_degree":278,"wind_dir":"W","pressure_mb":1010.0,"pressure_in":29.84,"precip_mm":0.05,"precip_in":0.0,"snow_cm":0.0,"humidity":56,"cloud":84,"feelslike_c":27.8,"feelslike_f":82.0,"windchill_c":26.8,"windchill_f":80.2,"heatindex_c":27.8,"heatindex_f":82.0,"dewpoint_c":17.3,"dewpoint_f":63.2,"will_it_rain":1,"chance_of_rain":83,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":14.9,"gust_kph":24.0,"uv":6.0},{"time_epoch":1720134000,"time":"2024-07-04 19:00","temp_c":25.8,"temp_f":78.4,"is_day":1,"condition":{"text":"Partly Cloudy ","icon":"//cdn.weatherapi.com/weather/64x64/day/116.png","code":1003},"wind_mph":7.6,"wind_kph":12.2,"wind_degree":290,"wind_dir":"WNW","pressure_mb":1011.0,"pressure_in":29.84,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":59,"cloud":48,"feelslike_c":27.0,"feelslike_f":80.6,"windchill_c":25.8,"windchill_f":78.4,"heatindex_c":27.0,"heatindex_f":80.6,"dewpoint_c":17.5,"dewpoint_f":63.4,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":13.1,"gust_kph":21.1,"uv":7.0},{"time_epoch":1720137600,"time":"2024-07-04 20:00","temp_c":24.8,"temp_f":76.6,"is_day":1,"condition":{"text":"Partly Cloudy ","icon":"//cdn.weatherapi.com/weather/64x64/day/116.png","code":1003},"wind_mph":5.8,"wind_kph":9.4,"wind_degree":305,"wind_dir":"NW","pressure_mb":1011.0,"pressure_in":29.84,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":65,"cloud":53,"feelslike_c":26.3,"feelslike_f":79.3,"windchill_c":24.8,"windchill_f":76.6,"heatindex_c":26.3,"heatindex_f":79.3,"dewpoint_c":17.7,"dewpoint_f":63.8,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":10.6,"gust_kph":17.1,"uv":6.0},{"time_epoch":1720141200,"time":"2024-07-04 21:00","temp_c":23.9,"temp_f":75.0,"is_day":1,"condition":{"text":"Partly Cloudy ","icon":"//cdn.weatherapi.com/weather/64x64/day/116.png","code":1003},"wind_mph":4.7,"wind_kph":7.6,"wind_degree":322,"wind_dir":"NW","pressure_mb":1010.0,"pressure_in":29.84,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":70,"cloud":46,"feelslike_c":25.6,"feelslike_f":78.2,"windchill_c":23.9,"windchill_f":75.0,"heatindex_c":25.6,"heatindex_f":78.2,"dewpoint_c":18.0,"dewpoint_f":64.3,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":8.8,"gust_kph":14.1,"uv":6.0},{"time_epoch":1720144800,"time":"2024-07-04 22:00","temp_c":23.1,"temp_f":73.5,"is_day":0,"condition":{"text":"Patchy rain nearby","icon":"//cdn.weatherapi.com/weather/64x64/night/176.png","code":1063},"wind_mph":2.9,"wind_kph":4.7,"wind_degree":292,"wind_dir":"WNW","pressure_mb":1011.0,"pressure_in":29.85,"precip_mm":0.01,"precip_in":0.0,"snow_cm":0.0,"humidity":74,"cloud":87,"feelslike_c":25.1,"feelslike_f":77.2,"windchill_c":23.1,"windchill_f":73.5,"heatindex_c":25.1,"heatindex_f":77.2,"dewpoint_c":18.1,"dewpoint_f":64.5,"will_it_rain":1,"chance_of_rain":75,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":5.5,"gust_kph":8.9,"uv":1.0},{"time_epoch":1720148400,"time":"2024-07-04 23:00","temp_c":22.3,"temp_f":72.2,"is_day":0,"condition":{"text":"Partly Cloudy ","icon":"//cdn.weatherapi.com/weather/64x64/night/116.png","code":1003},"wind_mph":3.1,"wind_kph":5.0,"wind_degree":275,"wind_dir":"W","pressure_mb":1011.0,"pressure_in":29.85,"precip_mm":0.0,"precip_in":0.0,"snow_cm":0.0,"humidity":78,"cloud":25,"feelslike_c":24.8,"feelslike_f":76.6,"windchill_c":22.3,"windchill_f":72.2,"heatindex_c":24.8,"heatindex_f":76.6,"dewpoint_c":18.2,"dewpoint_f":64.7,"will_it_rain":0,"chance_of_rain":0,"will_it_snow":0,"chance_of_snow":0,"vis_km":10.0,"vis_miles":6.0,"gust_mph":6.1,"gust_kph":9.9,"uv":1.0}]}]}}`